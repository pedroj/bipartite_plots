<!doctype html>
<html class="no-js">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1" />

	<title>Home</title>

    <meta name="theme-version" content="1.3.3" />
    <meta name="foundation-version" content="5.5.1" />
    <meta name="jquery-version" content="2.1.3" />
    <meta name="modernizr-version" content="2.8.3" />

	<!-- Foundation Theme for RapidWeaver by Joe Workman -->

	
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="robots" content="index, follow" />
		<meta name="generator" content="RapidWeaver" />
		

	<link rel="stylesheet" type="text/css" media="all" href="rw_common/themes/foundation/consolidated-0.css?rwcache=512440665" />
		

	<head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Networks in D3: This is a page with examples of plant-animal interaction networks in D3." />

    <link rel="stylesheet" type="text/css" media="screen" href="resources/stylesheets/stylesheet.css?rwcache=512440665?rwcache=512440665">
    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css?rwcache=512440665">

	<style type="text/css">
	body, td {
	   font-family: sans-serif;
	   background-color: white;
	   font-size: 14px;
	   margin: 8px;
	}

	tt, code, pre {
	   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
	}

	h1 { 
	   font-size:2.2em; 
	}

	h2 { 
	   font-size:1.8em; 
	}

	h3 { 
	   font-size:1.4em; 
	}

	h4 { 
	   font-size:1.0em; 
	}

	h5 { 
	   font-size:0.9em; 
	}

	h6 { 
	   font-size:0.8em; 
	}

	a:visited {
	   color: rgb(50%, 0%, 50%);
	}

	pre {	
	   margin-top: 0;
	   max-width: 95%;
	   border: 1px solid #ccc;
	   white-space: pre-wrap;
	}

	pre code {
	   display: block; padding: 0.5em;
	}

	code.r, code.cpp {
	   background-color: #F8F8F8;
	}

	table, td, th {
	  border: none;
	}

	blockquote {
	   color:#666666;
	   margin:0;
	   padding-left: 1em;
	   border-left: 0.5em #EEE solid;
	}

	hr {
	   height: 0px;
	   border-bottom: none;
	   border-top-width: thin;
	   border-top-style: dotted;
	   border-top-color: #999999;
	}

	@media print {
	   * { 
	      background: transparent !important; 
	      color: black !important; 
	      filter:none !important; 
	      -ms-filter: none !important; 
	   }

	   body { 
	      font-size:12pt; 
	      max-width:100%; 
	   }
       
	   a, a:visited { 
	      text-decoration: underline; 
	   }

	   hr { 
	      visibility: hidden;
	      page-break-before: always;
	   }

	   pre, blockquote { 
	      padding-right: 1em; 
	      page-break-inside: avoid; 
	   }

	   tr, img { 
	      page-break-inside: avoid; 
	   }

	   img { 
	      max-width: 100% !important; 
	   }

	   @page :left { 
	      margin: 15mm 20mm 15mm 10mm; 
	   }
     
	   @page :right { 
	      margin: 15mm 10mm 15mm 20mm; 
	   }

	   p, h2, h3 { 
	      orphans: 3; widows: 3; 
	   }

	   h2, h3 { 
	      page-break-after: avoid; 
	   }
	}

	</style>

	<!-- Styles for R syntax highlighter -->
	<style type="text/css">
	   pre .operator,
	   pre .paren {
	     color: rgb(104, 118, 135)
	   }

	   pre .literal {
	     color: rgb(88, 72, 246)
	   }

	   pre .number {
	     color: rgb(0, 0, 205);
	   }

	   pre .comment {
	     color: rgb(76, 136, 107);
	   }

	   pre .keyword {
	     color: rgb(0, 0, 255);
	   }

	   pre .identifier {
	     color: rgb(0, 0, 0);
	   }

	   pre .string {
	     color: rgb(3, 106, 7);
	   }
	</style>

	<!-- R syntax highlighter -->
<!-- R syntax highlighter -->
<link rel="stylesheet" href="resources/stylesheets/styles/xcode.css?rwcache=512440665">
<script src="resources/javascripts/highlight/highlight.pack.js?rwcache=512440665"></script>
<script>hljs.initHighlightingOnLoad();</script>
<!-------------------------->
	</script>



</head>


	<!--[if lt IE 9]>
	  <script src="rw_common/themes/foundation/ie8.js"></script>
	<![endif]-->

			<link rel='stylesheet' type='text/css' media='all' href='rw_common/plugins/stacks/stacks.css?rwcache=512440665' />
		<link rel='stylesheet' type='text/css' media='all' href='files/stacks_page_page0.css?rwcache=512440665' />
		
		
		
		

	
</head>

<body class="antialiased">

<div id="foundation-loader" class="loader"></div>
<script>
if(window.foundationloader === true){
var loader_inner = document.createElement('div'),
loader_class = window.loader_class||'line-scale',
loader_count = window.loader_count||5;
loader_inner.className = 'loader-inner '+loader_class;
for (var i = 0; i < loader_count; i++){loader_inner.appendChild(document.createElement('div'));}
document.getElementById('foundation-loader').appendChild(loader_inner);}
</script>


<div id='stacks_out_1_page0' class='stacks_top'><div id='stacks_in_1_page0' class=''><div id='stacks_out_2_page0' class='stacks_out'><div id='stacks_in_2_page0' class='stacks_in html_stack'><!DOCTYPE html>
<html>
<body>

<!-- HEADER -->
   <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/pedroj/bipartite_plots">View on GitHub</a>

          <h1 id="project_title">ggbipart, an R package for plotting bipartite networks</h1>
          <h2 id="project_tagline">Our aim here is to get plotting of bipartite networks within the <code>ggplot2</code> framework.</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/pedroj/bipartite_plots/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/pedroj/bipartite_plots/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

<!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
<h2>ggbipart</h2>

<p>The <code>ggbipart</code> package includes a series of R functions aimed to plot bipartite networks within the <code>ggplot2</code> environment. The library relies heavily on <a id="FBriatte" href="https://github.com/briatte/ggnet">code developed by Francois Briatte</a> for the <code>ggnet</code>code> library.

Bipartite networks are a special type of network where nodes are of two distinct types or sets, so that connections (links) only exist among nodes of the different sets.

As in other types of network, bipartite structures can be binary (only the presence/absence of the links is mapped) or quantitative (weighted), where the links can have variable importance or weight.

To plot, we start with an adjacency or incidence matrix. I’m using matrices that illustrate ecological interactions among species, such as the mutualisttic interactions of animal pollinators and plant flowers. The two sets (modes) of these bipartite networks are animals (e.g., pollinators) and plants species.

From any adjacency matrix we can get a network object or an <code>igraph</code>code> object for plotting and analysis.
</p>

<h2> Required packages</h2>


<pre><code class="r">
#————————————————————————————————————————————————————————————————
require(ggplot2)
require(network)
require(igraph)
require(sna)
require(ggnet)
require(ergm)
require(intergraph)
require(RColorBrewer)
#————————————————————————————————————————————————————————————————
</code></pre>
<br>

Here I plot bipartite networks from their adjacency matrices, i.e., the two-mode networks. The standard way to input an adjacency matrix is from a <code>.txt</code> or a <code>.csv</code> file. Most packages like <code>network, igraph</code> or <code>statnet</code> also accept edge-list archives. These have the form of a three-column array with <code>node1 node2 i</code> or <code>node1 node2 w</code>, where <code>node1</code> and <code>node2</code> are two nodes that interact, and <code>i</code> or <code>w</code> are the presence/abscence of interaction (<code>i= 0</code> or <code>i= 1</code>) or the edge weight in the case of weighted networks.

<br>
<br>



<h2> Initializing bipartite webs as network objects</h2> 


<pre><code class="r">
#————————————————————————————————————————————————————————————————
# Read data matrices.
# Read a network
# Creating the objects. Example input from the clipboard. 
#
# Where data.txt has a weighted adjacency matrix, e.g.,:
    Aa  Ab  Ac  Ba  Bb  Bc  Bd  Ca  Cb  Cc  Da
P1  139 60   9  23  4   104 5   3   5   2   1
P2  184 26  6   10  3   6   17  11  3   1   0
P3  131 74  33  36  13  19  0   9   0   1   0
P4  87  40  38  21  13  0   9   0   1   0   0
P5  100 42  17  12  4   1   1   0   0   0   0
P6  21  15  7   0   4   1   0   0   0   0   0
P7  42  16  3   0   2   0   0   0   0   0   0
P8  31  8   4   5   1   0   0   1   0   0   0
P9  46  8   2   0   3   0   0   0   0   0   0
P10 86  0   0   12  0   2   2   0   0   0   0
P11 23  8   1   5   0   0   0   0   0   0   0
P12 13  6   1   1   0   1   0   0   0   0   0
P13 5   0   1   0   0   0   0   0   0   0   0
P14 9   1   0   0   0   0   0   0   0   0   0

# Use this to copy from the clipboard, after select/copy the above block.
mymat <- read.table(pipe("pbpaste"), header= T, sep= "\t", row.names= 1)
#————————————————————————————————————————————————————————————————
</code></pre>
<br>

The adjacency matrix is just read from the clipboard as a tab-separated file with header names, and the first column is taken as the row names.

This next example (<a id="FBriatte" href="https://github.com/briatte/ggnet">from F. Briatte's code</a>) initializes a dataframe:
<br>


<pre><code class="r">
#————————————————————————————————————————————————————————————————
# A weighted adjacency matrix. Rows are animal species; columns  
# are plant species.
bip= data.frame(P1= c(1, 12, 6, 0),
                P2= c(1, 0, 4, 0),
                P3= c(1, 7, 3, 12),
     row.names= letters[1:4])
#————————————————————————————————————————————————————————————————
</code></pre>
<br>

These are two example datasets of well-sampled plant-frugivore interaction networks from S Spain, read in the usual way. I also read the attributes files, i.e., data.frames with node characteristics that can be used later to label the nodes.
<br>

Note that the adjacency matrices are read as data.frames. This is useful for later analysis. Yet it is very handy to have also these adjacency matrices in matrix form.
<br>

<br>
<pre><code class="r">
#————————————————————————————————————————————————————————————————
# The Nava de las Correhuelas dataset.
nch<- read.table("./data-raw/w96_adj_fru.csv", 
                  header=T, sep=",", row.names=1,
                  dec=".", na.strings="NA")
## Node attributes
nch_attr<- read.table("./data-raw/w96_node_attributes.csv", 
                  header=T, sep=",", 
                  dec=".", na.strings="NA")

# The Hato Raton dataset.
hr<- read.table("./data-raw/w97_adj_fru.csv", 
                  header=T, sep=",", row.names=1,
                  dec=".", na.strings="NA")
## Node attributes
hr_attr<- read.table("./data-raw/w97_node_attributes.csv", 
                  header=T, sep=",", dec=".", na.strings="NA")
#————————————————————————————————————————————————————————————————
</code></pre>
<br>

Node attributes include different variables characterizing each individual node. These values can later be passed to the <code>bip_ggnet</code> function to modify graph properties of nodes.
<br>

<br>
<pre><code class="r">
#————————————————————————————————————————————————————————————————
glimpse(nch_attr)

## Observations: 62
## Variables: 26
## $ class   <fctr> Magnoliopsida, Liliopsida, Magnoliopsida,...
## $ order   <fctr> Rosales, Arales, Ranunculales, Rosales, Euph...
## $ family  <fctr> Rosaceae, Araceae, Berberidaceae, Rosaceae,...
## $ genus   <fctr> Amelanchier, Arum, Berberis, Crataegus, ...
## $ species <fctr> Amelanchier.ovalis, Arum.italicum,...
## $ spcode  <fctr> Amova, Arita, Bevul, Cogra, Crmon, Dalau...
## $ w       <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...
## $ g       <dbl> 7.3, 9.2, 5.5, 7.0, 9.3, 6.4, 8.4, 8.6, 12.9,....
## $ f       <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...
## $ a       <dbl> 0.00010, 0.66000, 14.52000, 0.14500, 0.84500,...
## $ geog    <int> 4, 7, 14, 6, 14, 10, 6, 13, 4, 8, 8, 9, 4, 5,...
## $ ph      <dbl> 1.0, 0.5, 3.0, 1.0, 6.0, 1.0, 3.0, 10.0, 2.0,...
## $ pp      <dbl> 0.3333, 0.2121, 0.2424, 0.3030, 0.1515,...
## $ ps      <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...
## $ pa      <dbl> 0.1515, 0.1515, 0.1212, 0.0909, 0.1515,...
## $ pu      <dbl> 0.4242, 0.5758, 0.2121, 0.5455, 0.0303,...
## $ hab     <fctr> climax, climax, climax, climax, climax,...
## $ diet    <fctr> NA, NA, NA, NA, NA, NA, NA, NA, NA, N...
## $ forag   <fctr> NA, NA, NA, NA, NA, NA, NA, NA, N...
## $ noct    <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...
## $ nativ   <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, ...
## $ frlen   <dbl> 7.0, 11.1, 10.4, 7.5, 12.1, 9.4, 7.2, 8.2, ...
## $ fleshy  <fctr> Yes, Yes, Yes, Yes, Yes, Yes, Yes, Yes...
## $ seedm   <dbl> 0.003, 0.038, 0.020, 0.025, 0.124, 0.022,...
## $ height  <dbl> 1.9, 0.3, 1.2, 1.3, 4.0, 1.2, 3.0, 0.6, 2.8,...
## $ grwform <fctr> shrub, herb, shrub, shrub, tree, shrub,,...
#————————————————————————————————————————————————————————————————
</code></pre>
<br>

<br>
<pre><code class="r">
#————————————————————————————————————————————————————————————————
glimpse(hr_attr)

## Observations: 33
## Variables: 26
## $ class   <fctr> Aves, Aves, Aves, Aves, Aves, Aves,...
## $ order   <fctr> Passeriformes, Passeriformes, Passerif...
## $ family  <fctr> Muscicapidae, Muscicapidae, Muscicapida...
## $ genus   <fctr> Sylvia, Sylvia, Erithacus, Sylvia, Turdus,...
## $ species <fctr> Sylvia.atricapilla, Sylvia.borin, Erithacus.rubecula,...
## $ spcode  <fctr> Syatr, Sybor, Errub, Symel, Tumer, Tuphi,...
## $ w       <dbl> 17.5, 18.7, 15.8, 11.5, 84.0, 65.8, 16.9, ...
## $ g       <dbl> 8.0, 8.0, 8.5, 6.6, 13.7, 12.2, 7.3, 8.3, 8....
## $ f       <dbl> 0.861, 0.924, 0.659, 0.739, 0.889, 0.660...
## $ a       <dbl> 4.692, 2.058, 16.150, 15.908, 11.842, 0....
## $ geog    <dbl> 14, 6, 13, 10, 14, 14, 12, 2, 6, 12, 7, 10...
## $ ph      <dbl> 7, 1, 7, 12, 12, 3, 1, 2, 1, 3, 6, 12, 6, 12, 5,...
## $ pp      <dbl> 0.063, 0.250, 0.125, 0.000, 0.000, 0.438,...
## $ ps      <dbl> 0.000, 0.000, 0.188, 0.125, 0.000, 0.063,...
## $ pa      <dbl> 0.000, 0.000, 0.000, 0.000, 0.125, 0.063,...
## $ pu      <dbl> 0.000, 0.000, 0.000, 0.000, 0.000, 0.125,...
## $ hab     <fctr> forest, forest, forest, other, forest, forest...
## $ diet    <fctr> fruit, fruit, fruit, fruit, fruit, fruit, frui...
## $ forag   <fctr> solitary, solitary, solitary, solitary, soc...
## $ noct    <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, NA,...
## $ nativ   <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, ...
## $ frlen   <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA...
## $ fleshy  <fctr> NA, NA, NA, NA, NA, NA, NA, NA, N...
## $ seedm   <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...
## $ height  <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...
## $ grwform <fctr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...
#————————————————————————————————————————————————————————————————
</code></pre>
<br>

Here I use the function <code>bip_init_network</code> to initialize a few examples of bipartite networks. The function returns a network object. The equivalent function <code>bip_init_igraph</code> returns an igraph (graph) object.
<br>

<br>
<pre><code class="r">
#————————————————————————————————————————————————————————————————
source("./R/bip_init_network.R")
source("./R/bip_init_igraph.R")

nch.net<- bip_init_network(nch)     # Network object
nch.ig<- bip_init_igraph(nch)       # igraph object
hr.net<- bip_init_network(hr)       # Network object
hr.ig<- bip_init_igraph(hr)         # igraph object
#————————————————————————————————————————————————————————————————
</code></pre>
<br>
<br>



<h2> Functions to plot network graphs</h2> 

The <code>ggbipart</code> package includes the following functions:
<br>


<h4> bip_qtplot</h4> 

Simple function to plot a weighted bipartite network in a network object. The input is just the weighted (quantitative) adjacency matrix of a two-mode network. Uses objects of type <code>network</code>.

<h4>bip_railway</h4>

Simple function to plot a bipartite network with the classic layout of two parallel sets of nodes (as in the <code>bipartite</code> package).

<h4>bip_ggnet</h4>

Plotting bipartite networks from the adjacency matrix of a two-mode network. It uses the <code>ggnet</code> package extensively, and the <code>ggnet2</code> <a id="ggnet2" href="https://github.com/briatte/ggnet">function</a>.

<h4>bip_igplot</h4> 

Function to plot a weighted bipartite network in igraph. Its inputs are the adjacency matrix, to get the dimensions from, and the igraph object corresponding to the matrix.
<br><br>

<pre><code class="r">
#————————————————————————————————————————————————————————————————
# Sourcing required functions and initializing the net objects.
source("./R/bip_ggnet.R")
source("./R/bip_igplot.R")
source("./R/bip_qtplot.R")
source("./R/bip_railway.R")
source("./R/vectorize.R")
source("./R/bip_edgewt.R")
#————————————————————————————————————————————————————————————————
</code></pre>
<br><br>

<h2>Using bip_ggnet for bipartite graphs</h2>

<h3>Bipartite networks with ggnet2 using the ggplot2 framework</h3>


We first initialize the bipartite network; then use the adjacency matrix to compute scaled weighted edges with function <code>edgewt</code>. This is based in code from Francois Briatte, using package <code>ggnet</code>, function <code>ggnet2</code>.

<code>ggnet2</code> automatically detects two-mode graphs from their bipartite network attribute. To simplify the plotting of each mode, it understands arguments of the form <code>[alpha, color, shape, size] = “mode”</code>, which will mark the primary mode as "actor" and the secondary mode as  "event".

<h3>Node colors</h3>

Let’s now assign vertex attributes obtained from the attributes file.

The attributes can be passed to <code>ggnet2</code> to indicate that the nodes belong to a group, or have a given qualitative or quantitative attribute. All the user has to do is to pass the name of the vertex attribute to the color argument, which will find it in the list of vertex attributes and use it to map the colors of the nodes:
<br><br>

<pre><code class="r">
#————————————————————————————————————————————————————————————————
# Attributes for animals and plants.
names(nch_attr)

# Load in the preferred attributes
# We need to convert factors to chars in order to assign the attributes.
Fam<- as.character(nch_attr$family)
nch.net %v% "Fam"= Fam    
Gen<- as.character(nch_attr$genus)
nch.net %v% "Gen"= Gen    
nch.net %v% "BM"= nch_attr$w    
nch.net %v% "FrDiam"= nch_attr$g
#————————————————————————————————————————————————————————————————
</code></pre>
<br>


<h3>A simple graph</h3>

This graph uses function <code>bip_railway</code>:

<h4>Unweighted</h4>

<br>
<pre><code class="r">
#————————————————————————————————————————————————————————————————
# Plot layout coordinates for railway network plot. Input is the 
# adjacency matrix.
# 
mymat <- read.delim("./data-raw/data.txt", row.names=1)   # Not run.
g<- bip_railway(mymat, label=T)
## Loading required package: scales
g+ coord_flip()
#————————————————————————————————————————————————————————————————
</code></pre>
<br>

<img src="images/Rplot00.png" alt="Railway"></a>

<br>

<h4>Weighted</h4>

Label the edge weights directly into the edges of the graph; uses the <code>bip_ggnet</code>.
<br><br>

<pre><code class="r">
#————————————————————————————————————————————————————————————————
# Labelled edges with edge weights.

bip= data.frame(P1= c(1, 12, 6, 0),
                P2= c(1, 0, 4, 0),
                P3= c(1, 7, 3, 12),
     row.names= letters[1:4])
col= c("A"= "grey80", "P"= "gold2")
bip.net<- bip_init_network(as.matrix(bip)) 

bip_ggnet(bip.net, as.matrix(bip), 
       #  color= "mode", palette = col, 
          edge.label = "weights",
          label= TRUE)

## Warning in guide_merge.legend(init, x[[i]]): Duplicated override.aes is
## ignored.


# Set colors for each mode
col= c("P"= "#FC9272", "A"= "#9ECAE1")
pp<- bip_ggnet(hr.net, as.matrix(hr),
          size=7, shape= "mode", #label= T,
          color= "mode", palette= col, 
          layout.exp= 0.25) + 
          geom_text(aes(label= network.vertex.names(hr.net)),
                        color= "black", size= 3) +
          theme(legend.position="none")                 # Hide legend
pp
#————————————————————————————————————————————————————————————————
</code></pre>
<br>

<img src="images/Rplot1.png" alt="Weighted edges"></a>

<br>

Antother alternative is to pass the node colors directly, with a vector of node colors that has exactly the same length as the number of nodes in the network:
<br><br>

<pre><code class="r">
#————————————————————————————————————————————————————————————————
pp1<- bip_ggnet(nch.net, as.matrix(nch),
                size= 6, color= "mode", label= T, label.size=2,
                palette= c("P"= "indianred3", 
                           "A"= "steelblue4")) +
                theme(legend.position="none")       # Hide legend
#————————————————————————————————————————————————————————————————
</code></pre>
<br>

<br>
<pre><code class="r">
#————————————————————————————————————————————————————————————————
# Adding graphic details with other geoms. Node labels are the vertex names.

pp2<- bip_ggnet(nch.net, as.matrix(nch),
          size= 0,
          shape= "mode", 
          palette= "Set1",
          color= "mode",
          layout.exp= 0.25) +
          geom_point(aes(color= color), size=8, color="white") +
          geom_point(aes(color= color), size= 8, alpha= 0.5) +
          geom_point(aes(color= color), size= 6) +
          geom_text(aes(label= network.vertex.names(nch.net)), 
                    color= "black", size= 3.5) + # check_overlap= TRUE
          guides(color= FALSE) +
          theme(legend.position="none")          # Hide legend
pp2
#————————————————————————————————————————————————————————————————
</code></pre>
<br>

<img src="images/Rplot3.png" alt="Vertex names"></a>

<br>

<br>
<pre><code class="r">
#————————————————————————————————————————————————————————————————
# Numbered nodes.

nums<- as.vector(c(1:sum(dim(nch))))
pp3<- bip_ggnet(nch.net, as.matrix(nch),
          size= 0,
          shape= "mode", 
          palette= "Set1",
          color= "mode",
          layout.exp = 0.25) +
          geom_point(aes(color= color), size=10, color="white") +
          geom_point(aes(color= color), size= 10, alpha= 0.5) +
          geom_point(aes(color= color), size= 8) +
          geom_text(aes(label= nums), 
                    color= "white", size= 3.5, fontface="bold") + 
          guides(color= FALSE) +
          theme(legend.position="none")          # Hide legend
pp3
#————————————————————————————————————————————————————————————————
</code></pre>
<br>

<img src="images/Rplot2.png" alt="Numbered"></a>

<br>


<br>
<pre><code class="r">
#————————————————————————————————————————————————————————————————
sessionInfo()
</code></pre>
<br>
<pre><code class="r">
## R version 3.3.2 (2016-10-31)
## Platform: x86_64-apple-darwin13.4.0 (64-bit)
## Running under: macOS Sierra 10.12.4
## 
## locale:
## [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
## 
## attached base packages:
## [1] stats     grDevices graphics  datasets  utils     methods   base     
## 
## other attached packages:
##  [1] scales_0.4.1         dplyr_0.5.0          RColorBrewer_1.1-2  
##  [4] taxize_0.8.4         lme4_1.1-12          Matrix_1.2-7.1      
##  [7] knitr_1.14           intergraph_2.0-2     popgraph_1.4        
## [10] igraph_1.0.1         ggnetwork_0.5.1      ggnet_0.1.0         
## [13] ggplot2_2.2.1        markdown_0.7.7       downloader_0.4      
## [16] bipartite_2.08       sna_2.4              network_1.13.0      
## [19] statnet.common_3.3.0 vegan_2.4-0          lattice_0.20-34     
## [22] permute_0.9-0        ape_4.1             
## 
## loaded via a namespace (and not attached):
##  [1] ggrepel_0.6.9     Rcpp_0.12.9       assertthat_0.1   
##  [4] rprojroot_1.0-2   digest_0.6.12     foreach_1.4.3    
##  [7] R6_2.2.0          plyr_1.8.4        evaluate_0.9     
## [10] spam_1.3-0        httr_1.2.1        lazyeval_0.2.0   
## [13] minqa_1.2.4       data.table_1.10.0 nloptr_1.0.4     
## [16] rmarkdown_1.3     splines_3.3.2     stringr_1.2.0    
## [19] munsell_0.4.3     mgcv_1.8-15       htmltools_0.3.5  
## [22] tibble_1.2        lpSolve_5.6.13    codetools_0.2-15 
## [25] reshape_0.8.6     MASS_7.3-45       grid_3.3.2       
## [28] nlme_3.1-128      jsonlite_1.3      gtable_0.2.0     
## [31] DBI_0.4-1         magrittr_1.5      formatR_1.4      
## [34] stringi_1.1.2     reshape2_1.4.2    sp_1.2-4         
## [37] xml2_1.1.1        iterators_1.0.8   tools_3.3.2      
## [40] bold_0.4.0        maps_3.1.0        fields_8.4-1     
## [43] parallel_3.3.2    colorspace_1.2-6  cluster_2.0.5    
## [46] sampling_2.8
#————————————————————————————————————————————————————————————————
</code></pre>
<br>

<hr>


<h2>Acknowledgements</h2>

This code benefits from comments and <code>R</code> code sharing by François Briatte and Scott Chamberlain.<br>

Best wishes, and happy computing! -- Pedro<br><br>

Last Updated: <code>Martes, 28 Marzo, 2017 01:35 AM</code> On line since 1989. Pedro Jordano


  </body>
</html>


</div></div><div id='stacks_out_15_page0' class='stacks_out'><div id='stacks_in_15_page0' class='stacks_in html_stack'><!DOCTYPE html>
<html>
  <body>

   
    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
<h2>Suggested references:</h2>

<ul>
<li>Dormann, C.F., Frund, J., Bluthgen, N. & Gruber, B. (2009) Indices, graphs and null models: Analyzing bipartite ecological networks. Open Ecology Journal, 2, 7–24.</li>
<li>Pocock, M.J.O., Evans, D.M., Fontaine, C., Harvey, M., Julliard, R., McLaughlin, ??rla, Silvertown, J., Tamaddoni-Nezhad, A., White, P.C.L. & Bohan, D.A. (2016) The visualisation of ecological networks, and their use as a tool for engagement, advocacy and management. Advances in Ecological Research, 1st ed, pp. 41–85. Elsevier Ltd.</li>
<li>Bascompte, J. & Jordano, P. (2014) Mutualistic Networks. Princeton University Press, Princeton, NJ.</li>
</ul>

      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

</div></div></div></div>


<script src="rw_common/themes/foundation/foundation.js?rwcache=512440665"></script>


<!--[if lt IE 9]>
  <script src="rw_common/themes/foundation/ie8rem.js"></script>
<![endif]-->

</body>
</html>
